# Maintainer: Your Name <your.email@example.com>

pkgname=libmali-cix
pkgver=2.0.0
pkgrel=1
pkgdesc="Repackaged libmali without mali_csffw.bin firmware"
arch=('aarch64')
url=""
license=('custom')
depends=()
makedepends=()
source=("cix-gpu-umd_2.0.0_arm64.deb")
sha256sums=('SKIP')

package() {
    cd "$srcdir"
    
    # Extract the debian archive
    ar x cix-gpu-umd_2.0.0_arm64.deb
    
    # Extract the data archive (supports both gzip and xz compression)
    if [ -f "data.tar.xz" ]; then
        tar xf data.tar.xz -C "$pkgdir"
    else
        tar xf data.tar.gz -C "$pkgdir"
    fi

    mv -v "$pkgdir/lib/"* "$pkgdir/usr/lib/"
    rm -rf "$pkgdir/lib"
    rm -rf "$pkgdir/usr/lib/firmware/mali_csffw.bin"
}
